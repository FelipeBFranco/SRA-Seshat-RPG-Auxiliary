<div class="charactersContent">
  <div class="sideBar">
    <div class="textoPerson text-center">
      <h4>Personagens de {{ loggedPlayerName }}</h4>
    </div>
    <div class="personagens">
      <div
        class="personagemIndividual mt-1"
        *ngFor="let personagem of playerCharacters"
      >
        <p-panel
          header="{{ personagem.name }} - {{ personagem.race }}"
          [toggleable]="true"
          [collapsed]="true"
          [toggler]="'header'"
          [style]="{ cursor: 'pointer' }"
        >
          <p>{{ personagem.campaign }}</p>
          <p class="row botoesCriacaoDelecao">
            <button
              class="btn selectCharacterButton col-lg-6 col-md-12 col-sm-12"
              (click)="selectCharacter(personagem)"
            >
              Selecionar
            </button>
            <button
              (click)="confirmDeleteCharacter(personagem)"
              icon="pi pi-trash"
              class="btn btn-danger deleteCharacterButton col-6"
            >
              Deletar
            </button>
          </p>
        </p-panel>
      </div>
      <button
        class="btn mt-2 addCharacterButton"
        (click)="
          showDialog();
          tipoDialogForm = 'Criar';
          clearSelectedCharacter();
          setTextDisplayForDialog('Criar Personagem')
        "
        style="width: 100%"
      >
        Criar Personagem
      </button>
    </div>
  </div>
  <div class="rightContent">
    <div class="logoutButton">
      <app-logout-button></app-logout-button>
    </div>
    <div
      class="infoPersonagemSelecionado text-center"
      [ngStyle]="{ height: '100vh', padding: '10px' }"
    >
      <div
        [ngStyle]="{
          'min-height': '100%',
          'background-color': '#535353',
          'border-radius': '20px'
        }"
        class="text-center imagemFundo"
      >
        <ul *ngIf="!selectedCharacter" class="titleList row">
          <li>
            <span class="selectedCharacterTitle">
              Selecione um personagem
            </span>
          </li>
        </ul>
        <ul class="titleList" *ngIf="selectedCharacter">
          <div class="BotaoEditarPersonagem">
            <button
              (click)="
                showDialog();
                tipoDialogForm = 'Editar';
                selectCharacter(selectedCharacter);
                setTextDisplayForDialog(
                  'Editar Atributos de ' + selectedCharacter.name
                )
              "
              class="btn btn-secondary botaoEditarPersonagem"
              pTooltip="Editar Personagem"
              tooltipPosition="left"
            >
              <p-inputIcon styleClass="pi pi-pencil" />
            </button>
          </div>
          <li>
            <span class="selectedCharacterTitle">
              {{ selectedCharacter.name }}
            </span>
            <small class="levelText">
              Nv.
              {{
                selectedCharacter.attributes.level
                  ? selectedCharacter.attributes.level
                  : 1
              }}
            </small>
          </li>
          <li class="progressbar" [style]="{ padding: '0' }">
            <p-progressBar
              [value]="selectedCharacter.attributes.experience * 10"
              [style]="{ height: '10px', padding: '0' }"
            >
              <ng-template pTemplate="content" let-value>
                <span class="progressbarText"
                  >{{ selectedCharacter.attributes.experience }}/10</span
                >
              </ng-template>
            </p-progressBar>
          </li>
          <li>
            {{ selectedCharacter.classType }}
          </li>
        </ul>
        <ul *ngIf="selectedCharacter" class="attributesBarList row text-center">
          <li class="attributesBar col-3">
            <div class="attributesLevelsList healthBar">
              <span>Vida</span>
              <p-progressBar
                [value]="
                  selectedCharacter.attributes.healthMax > 0
                    ? selectedCharacter.attributes.health <=
                      selectedCharacter.attributes.healthMax
                      ? (selectedCharacter.attributes.health /
                          selectedCharacter.attributes.healthMax) *
                        100
                      : 100
                    : 0
                "
                [style]="{ height: '30px', padding: '0' }"
              >
                <ng-template pTemplate="content" let-value>
                  <span class="progressbarText"
                    >{{ selectedCharacter.attributes.health }}/{{
                      selectedCharacter.attributes.healthMax
                    }}</span
                  >
                </ng-template>
              </p-progressBar>
            </div>
          </li>
          <li class="attributesBar col-3">
            <div class="attributesLevelsList staminaBar">
              <span>Stamina</span>
              <p-progressBar
                [value]="
                  selectedCharacter.attributes.staminaMax > 0
                    ? (selectedCharacter.attributes.stamina /
                        selectedCharacter.attributes.staminaMax) *
                      100
                    : 100
                "
                [style]="{ height: '30px', padding: '0' }"
              >
                <ng-template pTemplate="content" let-value>
                  <span class="progressbarText"
                    >{{ selectedCharacter.attributes.stamina }}/{{
                      selectedCharacter.attributes.staminaMax
                    }}</span
                  >
                </ng-template>
              </p-progressBar>
            </div>
          </li>
          <li class="attributesBar col-3">
            <div class="attributesLevelsList manaBar">
              <span>Mana</span>
              <p-progressBar
                [value]="
                  selectedCharacter.attributes.manaMax > 0
                    ? (selectedCharacter.attributes.mana /
                        selectedCharacter.attributes.manaMax) *
                      100
                    : 100
                "
                [style]="{ height: '30px' }"
              >
                <ng-template pTemplate="content" let-value>
                  <span class="progressbarText"
                    >{{ selectedCharacter.attributes.mana }}/{{
                      selectedCharacter.attributes.manaMax
                    }}</span
                  >
                </ng-template>
              </p-progressBar>
            </div>
          </li>
          <li class="attributesBar col-3">
            <div class="attributesLevelsList amalgamaBar">
              <span>Amalgama</span>
              <p-progressBar
                [value]="
                  selectedCharacter.attributes.amalgamaMax > 0
                    ? (selectedCharacter.attributes.amalgama /
                        selectedCharacter.attributes.amalgamaMax) *
                      100
                    : 100
                "
                [style]="{ height: '30px', padding: '0' }"
              >
                <ng-template pTemplate="content" let-value>
                  <span class="progressbarText"
                    >{{ selectedCharacter.attributes.amalgama }}/{{
                      selectedCharacter.attributes.amalgamaMax
                    }}</span
                  >
                </ng-template>
              </p-progressBar>
            </div>
          </li>
        </ul>
        <ul *ngIf="selectedCharacter" class="attributesList row">
          <li class="row col-3 atributosDoPersonagem cards">
            <div class="row col-12 attributesStatsList text-center inner">
              <div class="row col-12 attributesStatsListText blob">
                <span class="col-8 attributeText"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25"
                    height="25"
                    viewBox="0 0 30 30"
                    fill="none"
                    class="mr-3"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M30 23.0365H28.3496V7.25817H30V23.0365ZM6.0083 12.9981H23.9673V17.0083H6.0083V12.9981ZM28.0298 30H24.9316V0H28.0298V30ZM5.03906 30H1.94092V0H5.03906V30ZM1.61865 23.0365H0V7.25817H1.61865V23.0365Z"
                      fill="black"
                    /></svg
                  >FOR</span
                >
                <b class="attributeNumber col-4">{{
                  selectedCharacter.attributes.strength
                }}</b>
              </div>
              <div class="row col-12 attributesStatsListText">
                <span class="col-8 attributeText"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="35"
                    height="35"
                    viewBox="0 0 35 35"
                    fill="none"
                    class="mr-3"
                  >
                    <g clip-path="url(#clip0_108_207)">
                      <path
                        d="M27.8097 4.64638C26.8266 5.98531 24.9151 6.30035 23.5225 5.38148C22.1298 4.46261 21.8022 2.59861 22.7579 1.25969C23.7409 -0.0792387 25.6524 -0.394279 27.0451 0.524592C28.4377 1.44346 28.7927 3.30746 27.8097 4.64638ZM34.7456 7.92806L31.1411 12.9162C30.7315 13.52 29.885 13.6513 29.2569 13.2575L24.0686 9.79205L18.5253 17.6943L23.2494 20.871C23.659 21.1335 23.9867 21.5798 24.0686 22.0524L25.4067 29.3246C25.5705 30.3222 24.8605 31.2936 23.8229 31.4774C22.7852 31.6349 21.7749 30.9523 21.5837 29.9547L20.3822 23.4176L14.4293 19.3483C14.4293 19.3483 11.289 23.7064 11.0706 23.9689C10.8521 24.2314 10.661 24.599 10.306 24.7828C9.84175 25.0453 9.29562 25.0716 8.8314 24.9665L1.40393 23.05C0.393574 22.7875 -0.207177 21.7899 0.0658917 20.7922C0.33896 19.8209 1.37662 19.2433 2.41428 19.5058L8.50371 21.0548L18.225 7.48175H14.4839L11.289 11.8923C10.8794 12.4962 10.0329 12.6274 9.40484 12.2336C8.77678 11.8398 8.64025 11.026 9.04985 10.4221L12.6544 5.46024C12.9274 5.06644 13.3916 4.85641 13.8559 4.90892H20.0818C21.0103 4.90892 21.9387 5.17145 22.7306 5.72277L24.724 7.08795L29.6392 10.4221L32.5338 6.48412C32.9434 5.88029 33.7899 5.74903 34.4179 6.14283C35.046 6.53663 35.1825 7.37674 34.7456 7.92806Z"
                        fill="black"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_108_207">
                        <rect width="35" height="35" fill="white" />
                      </clipPath>
                    </defs></svg
                  >AGI</span
                >
                <b class="attributeNumber col-4">{{
                  selectedCharacter.attributes.agility
                }}</b>
              </div>
              <div class="row col-12 attributesStatsListText">
                <span class="col-8 attributeText"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="30"
                    height="30"
                    viewBox="0 0 30 30"
                    fill="none"
                    class="mr-3"
                  >
                    <g clip-path="url(#clip0_108_212)">
                      <path
                        d="M10.8333 1.66669C9.27604 1.66669 7.98437 2.7344 7.61458 4.1771C7.57292 4.1771 7.54167 4.16669 7.5 4.16669C5.66146 4.16669 4.16667 5.66148 4.16667 7.50002C4.16667 7.75002 4.19792 7.99481 4.25521 8.22919C2.73437 8.85419 1.66667 10.3438 1.66667 12.0834C1.66667 12.7396 1.83333 13.349 2.09896 13.9011C0.848958 14.6198 0 15.9531 0 17.5C0 19.2344 1.0625 20.724 2.57292 21.349C2.52604 21.5886 2.5 21.8334 2.5 22.0834C2.5 24.1563 4.17708 25.8334 6.25 25.8334C6.46354 25.8334 6.67188 25.8073 6.875 25.7709C7.375 27.2552 8.76042 28.3334 10.4167 28.3334C12.4896 28.3334 14.1667 26.6563 14.1667 24.5834V5.00002C14.1667 3.16148 12.6719 1.66669 10.8333 1.66669ZM30 17.5C30 15.9531 29.151 14.6198 27.901 13.9011C28.1719 13.349 28.3333 12.7396 28.3333 12.0834C28.3333 10.3438 27.2656 8.85419 25.7448 8.22919C25.7969 7.99481 25.8333 7.75002 25.8333 7.50002C25.8333 5.66148 24.3385 4.16669 22.5 4.16669C22.4583 4.16669 22.4219 4.1771 22.3854 4.1771C22.0156 2.7344 20.724 1.66669 19.1667 1.66669C17.3281 1.66669 15.8333 3.15627 15.8333 5.00002V24.5834C15.8333 26.6563 17.5104 28.3334 19.5833 28.3334C21.2396 28.3334 22.625 27.2552 23.125 25.7709C23.3281 25.8073 23.5365 25.8334 23.75 25.8334C25.8229 25.8334 27.5 24.1563 27.5 22.0834C27.5 21.8334 27.474 21.5886 27.4271 21.349C28.9375 20.724 30 19.2344 30 17.5Z"
                        fill="black"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_108_212">
                        <rect width="30" height="30" fill="white" />
                      </clipPath>
                    </defs></svg
                  >INT</span
                >
                <b class="attributeNumber col-4">{{
                  selectedCharacter.attributes.intelligence
                }}</b>
              </div>
              <div class="row col-12 attributesStatsListText">
                <span class="col-8 attributeText"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="30"
                    height="30"
                    viewBox="0 0 30 30"
                    fill="none"
                    class="mr-3"
                  >
                    <path
                      d="M19.3242 13.81L23.0057 8.9637L25.517 10.8715L21.8356 15.7201L19.3242 13.81ZM18.5707 13.2516L22.4854 8.09534L19.8487 6.09436L15.934 11.2506L18.5707 13.2516ZM16.9606 7.52229L15.8297 9.84084L19.1696 5.44631L16.6787 3.55374L14.5553 6.34924L16.9606 7.52229ZM15.7453 3.23088L13.0125 1.15491L10.5516 4.39573L13.6963 5.92913L15.7453 3.23088ZM22.0149 17.0309L13.8703 11.0127L13.2891 11.066L13.5563 11.1832L17.1985 19.2944L16.2305 19.4262L12.8508 11.8969L10.5071 10.8598L10.2727 9.05276L12.5819 10.1906L14.7123 9.99553L15.7084 7.95471L9.21038 4.78538L4.48303 11.3778L10.4063 20.3127L9.0762 28.8451H19.9805V21.8332L22.0483 18.9662L22.6758 16.1584L22.0149 17.0309Z"
                      fill="black"
                    /></svg
                  >VON</span
                >
                <b class="attributeNumber col-4">{{
                  selectedCharacter.attributes.mind
                }}</b>
              </div>
              <div class="row mt-5">
                <div class="row col-12 attributesStatsListText">
                  <span class="col-8 attributeText"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="30"
                      height="30"
                      viewBox="0 0 30 30"
                      fill="none"
                      class="mr-3"
                    >
                      <path
                        d="M14.0625 2.59155C13.3046 2.73293 12.4145 3.03764 11.0471 3.50568L10.3311 3.75078C6.5729 5.03723 4.69379 5.68045 4.2219 6.35279C3.76031 7.01045 3.75022 8.93696 3.75 12.7616L14.0625 9.32407V2.59155Z"
                        fill="black"
                        stroke="black"
                        stroke-opacity="0.52"
                        stroke-width="2.66667"
                      />
                      <path
                        d="M14.0625 11.3005L3.75 14.738V14.989C3.75 22.0366 9.0487 25.4566 12.3732 26.9089C13.0116 27.1877 13.424 27.3679 14.0625 27.4494V11.3005Z"
                        fill="black"
                        stroke="black"
                        stroke-opacity="0.52"
                        stroke-width="2.66667"
                      />
                      <path
                        d="M15.9375 27.4494V11.3005L26.25 14.738V14.989C26.25 22.0366 20.9513 25.4566 17.6268 26.9089C16.9884 27.1877 16.576 27.3679 15.9375 27.4494Z"
                        fill="black"
                        stroke="black"
                        stroke-opacity="0.52"
                        stroke-width="2.66667"
                      />
                      <path
                        d="M15.9375 9.32407V2.59155C16.6954 2.73293 17.5855 3.03764 18.9529 3.50568L19.6689 3.75078C23.4271 5.03723 25.3062 5.68045 25.7781 6.35279C26.2397 7.01045 26.2498 8.93696 26.25 12.7616L15.9375 9.32407Z"
                        fill="black"
                        stroke="black"
                        stroke-opacity="0.52"
                        stroke-width="2.66667"
                      /></svg
                    >Bloq</span
                  >
                  <b class="attributeNumber col-4">{{
                    selectedCharacter.attributes.block
                  }}</b>
                </div>
                <div class="row col-12 attributesStatsListText">
                  <span class="col-8 attributeText"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="30"
                      height="30"
                      viewBox="0 0 30 30"
                      fill="none"
                      class="mr-3"
                    >
                      <path
                        d="M25.3369 8.40842C26.0334 7.56842 26.4863 6.38905 26.4863 5.06905C26.4863 2.68498 25.0688 0.709671 23.2538 0.473421C23.1328 0.454671 23.0034 0.473421 22.8797 0.473421C22.1381 0.473421 21.4481 0.759359 20.8744 1.24873L0.982505 2.68873L19.2834 4.01436V4.71186C19.2797 4.77561 19.2769 4.83936 19.275 4.90405L0.982505 6.22873L19.2778 7.55342V8.44311L0.982505 9.7678L17.2528 10.9462V11.1919C17.1338 11.4956 17.0306 11.8172 16.9406 12.1509L0.981567 13.3069L16.1981 14.4084V15.5512L0.981567 16.6528L16.2253 17.7562V19.0875L0.981567 20.1909L18.6844 21.4725V22.4475L0.981567 23.729L19.1297 25.0434V25.9537L0.981567 27.2672L19.3875 28.6003L19.4316 29.2753H26.0841L26.7788 19.95H29.3972C29.3972 15.4828 29.1113 9.11811 25.3359 8.40748L25.3369 8.40842ZM19.8769 7.59561C19.8778 7.59748 19.8788 7.6003 19.8806 7.60217L19.8206 7.59186L19.8769 7.59561Z"
                        fill="black"
                      /></svg
                    >Esq</span
                  >
                  <b class="attributeNumber col-4">{{
                    selectedCharacter.attributes.dodge
                  }}</b>
                </div>
                <div class="row col-12 attributesStatsListText">
                  <span class="col-8 attributeText"
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="32"
                      height="32"
                      viewBox="0 0 32 32"
                      fill="none"
                      class="mr-3"
                    >
                      <path
                        d="M30.863 22.62C29.025 21.414 26.154 19.833 26.154 18.057C26.154 16.281 29.025 14.627 30.863 13.421C28.746 13.448 25.971 12.736 25.205 11.195C24.435 9.64598 25.83 7.55498 26.921 5.42798C25.096 6.68598 23.322 8.32698 21.993 7.43598C20.664 6.54498 20.031 3.30198 20.059 0.828979C19.019 2.98998 17.656 4.58898 16.117 4.58898C14.584 4.58898 13.177 3.01098 12.138 0.865979C12.161 3.32598 11.53 6.54598 10.204 7.43598C8.87799 8.32598 7.10098 6.68598 5.27598 5.42798C6.36698 7.55598 7.90698 9.64598 7.13798 11.195C6.37498 12.731 3.44098 13.442 1.33398 13.421C3.16798 14.627 6.26198 16.283 6.26198 18.057C6.26198 19.831 3.16798 21.414 1.33398 22.62C3.43998 22.599 6.37398 23.347 7.13798 24.883C7.90198 26.421 6.57398 28.402 5.02898 30.231C7.83098 29.268 9.09999 29.872 10.364 30.906H12.348C9.67698 28.693 7.84498 24.167 7.84498 18.934C7.84498 11.52 11.527 5.50198 16.058 5.50198C20.588 5.50198 24.271 11.521 24.271 18.934C24.271 24.167 22.439 28.693 19.768 30.906H21.473C22.713 29.992 23.961 29.302 27.079 30.325C25.439 28.434 24.442 26.421 25.206 24.883C25.972 23.341 28.746 22.593 30.863 22.62ZM18.212 13.042C18.798 12.306 19.176 11.284 19.176 10.152C19.176 7.91598 17.752 6.10998 16.003 6.10998C15.894 6.10998 15.781 6.09598 15.674 6.10998C14.077 6.31798 12.83 8.05498 12.83 10.152C12.83 11.313 13.228 12.35 13.841 13.089C10.52 13.714 10.269 19.311 10.269 23.24H12.572L13.183 31.441H19.035L19.576 23.24H21.762C21.762 19.3 21.84 13.605 18.212 13.042Z"
                        fill="black"
                      /></svg
                    >Det</span
                  >
                  <b class="attributeNumber col-4">{{
                    selectedCharacter.attributes.determination
                  }}</b>
                </div>
              </div>
            </div>
          </li>
          <li class="col-6 imagemJogador">
            <img
              [src]="'data:image/jpeg;base64,' + selectedCharacter.image"
              alt="{{ selectedCharacter.name }}"
              class="characterImage"
            />
          </li>
          <li class="col-3 botoesDeAcao text-center">
            <div class="actionButtonGrid">
              <div class="esqueletoBotoes text-center">
                <button
                  class="btn btn-secondary botaoLadoDireito"
                  (click)="
                    visibilityDialogInventory = true;
                    requisicaoInventarioPersonagem(selectedCharacter!.id)
                  "
                >
                  <img
                    src="../../../assets/imgs/icons/backpack-icon.svg"
                    alt="Inventário"
                    class="ButtonIcon"
                  />
                </button>
                <span>Inventário</span>
              </div>
              <div class="row">
                <div class="esqueletoBotoes text-center">
                  <button
                    class="btn btn-secondary botaoLadoDireitoSkill"
                    (click)="
                      visibilityDialogSkills = true;
                      requisicaoSkillsPersonagem(selectedCharacter.id)
                    "
                  >
                    <img
                      src="../../../assets/imgs/icons/Skill-icon.svg"
                      alt="Inventário"
                      class="ButtonIconSkill"
                    />
                  </button>
                  <span>Habilidades</span>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<p-dialog
  header="{{ textoDialogForm }}"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '50rem' }"
  [closeOnEscape]="false"
  [closable]="false"
  [blockScroll]="true"
  [keepInViewport]="true"
  [draggable]="false"
>
  <ng-template pTemplate="content">
    <!-- Assuming attributesForm is your FormGroup with fixed fields -->
    <!-- FORM DE EDICAO ATRIBUTO PERSONAGEM-->
    <form
      [formGroup]="attributesForm"
      class="attributesForm row"
      *ngIf="tipoDialogForm === 'Editar'"
      method="post"
      (ngSubmit)="requisicaoMudarAtributos()"
    >
      <div
        class="col-4 text-center"
        *ngFor="
          let controlName of getCamposFormularioReativoEdicaoPersonagem(
            attributesForm.controls
          )
        "
      >
        <label class="col-12">{{ labelMapping[controlName] }}</label>
        <input
          class="col-12"
          pInputText
          [formControlName]="controlName"
          type="{{ getType(controlName) }}"
        />
        <!-- Display validation message -->
      </div>
    </form>
    <!-- FORM DE CRIACAO DE PERSONAGEM-->
    <form
      [formGroup]="creationForm"
      class="attributesForm row"
      *ngIf="tipoDialogForm === 'Criar'"
      method="post"
      (ngSubmit)="createCharacter()"
    >
      <ng-container
        *ngFor="
          let controlName of getCamposFormularioReativoCriacaoPersonagem(
            creationForm.controls
          )
        "
        class="text-center"
      >
        <div
          *ngIf="controlName != 'userId' && controlName != 'image'"
          class="col-4 row"
        >
          <label class="col-12">{{ labelMapping[controlName] }}</label>
          <input
            class="col-10 ml-2"
            pInputText
            [formControlName]="controlName"
            type="{{ getType(controlName) }}"
          />
          <!-- Display validation message -->
        </div>
      </ng-container>
      <ng-container class="text-center">
        <div class="col-8 row uploadImagem">
          <label class="col-12 ml-1">Imagem</label>
          <input type="file" (change)="onFileChange($event)" class="btn" />
          <!-- Display validation message -->
        </div>
      </ng-container>
    </form>
    <!-- FORM SKILL -->
    <form
      [formGroup]="skillForm"
      class="attributesForm row"
      *ngIf="tipoDialogForm === 'Skill'"
      method="post"
    >
      <ng-container
        *ngFor="
          let controlName of getCamposFormularioReativoCriacaoPersonagem(
            skillForm.controls
          )
        "
        class="text-center"
      >
        <div *ngIf="controlName != 'userId'" class="col-4 row">
          <label class="col-12">{{ labelMapping[controlName] }}</label>
          <input
            class="col-10 ml-2"
            pInputText
            [formControlName]="controlName"
            type="{{ getType(controlName) }}"
          />
          <!-- Display validation message -->
        </div>
      </ng-container>
    </form>
    <!-- FORM CRIACAO HABILIDADE -->
    <form
      [formGroup]="itemForm"
      class="attributes form row"
      *ngIf="tipoDialogForm === 'Item'"
      method="post"
    >
      <ng-container
        *ngFor="
          let controlName of getCamposFormularioReativoCriacaoPersonagem(
            itemForm.controls
          )
        "
        class="text-center"
      >
        <div *ngIf="controlName != 'userId'" class="col-4 row">
          <label class="col-12">{{ labelMapping[controlName] }}</label>
          <input
            class="col-10 ml-2"
            pInputText
            [formControlName]="controlName"
            type="{{ getType(controlName) }}"
          />
          <!-- Display validation message -->
        </div>
      </ng-container>
    </form>
  </ng-template>
  <ng-template pTemplate="footer">
    <p-button
      label="Fechar"
      [outlined]="true"
      severity="secondary"
      (onClick)="visible = false"
    />
    <p-button
      *ngIf="tipoDialogForm === 'Editar'"
      label="Salvar Alterações"
      [outlined]="true"
      severity="contrast"
      type="submit"
      (onClick)="visible = false; requisicaoMudarAtributos()"
    />
    <p-button
      *ngIf="tipoDialogForm == 'Criar'"
      label="Criar Personagem"
      [outlined]="true"
      severity="contrast"
      type="submit"
      (onClick)="visible = false; createCharacter()"
    />
    <p-button
      *ngIf="tipoDialogForm == 'Skill'"
      label="{{
        textoDialogForm == 'Adicionar Skill' ? textoDialogForm : 'Editar Skill'
      }}"
      [outlined]="true"
      severity="contrast"
      type="submit"
      (onClick)="
        visible = false;
        determineSkillAction(selectedCharacter, textoDialogForm, skillId!);
        clearItemAndSkillForms()
      "
    />
    <p-button
      *ngIf="tipoDialogForm == 'Item'"
      label="{{
        textoDialogForm == 'Adicionar Item' ? textoDialogForm : 'Editar Item'
      }}"
      [outlined]="true"
      severity="contrast"
      type="submit"
      (onClick)="
        visible = false;
        determineItemAction(selectedCharacter, textoDialogForm, itemId);
        clearItemAndSkillForms()
      "
    />
  </ng-template>
</p-dialog>
<p-dialog
  header="Skills de {{ selectedCharacter ? selectedCharacter.name : '' }}"
  [(visible)]="visibilityDialogSkills"
  [modal]="true"
  [style]="{ width: '50rem' }"
  [closeOnEscape]="false"
  [closable]="false"
  [blockScroll]="true"
  [keepInViewport]="true"
  [draggable]="false"
>
  <div class="">
    <p-table
      [value]="characterSkills"
      styleClass="p-datatable-striped"
      [tableStyle]="{ 'min-width': '40rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="headerTabela" colspan="2">Nome</th>
          <th class="headerTabela" colspan="2">Descrição</th>
          <th class="headerTabela" colspan="1">Energia</th>
          <th class="headerTabela" colspan="1">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-skill>
        <tr>
          <td class="corpoTabela" colspan="2">{{ skill.name }}</td>
          <td class="corpoTabela" colspan="2">{{ skill.description }}</td>
          <td class="corpoTabela" colspan="1">{{ skill.energy }}</td>
          <td class="corpoTabela text-center" colspan="1">
            <button
              class="btn btn-secondary botaoEditarSkillHabilidade mt-2 mb-2"
              pTooltip="Editar Skill"
              tooltipPosition="left"
              (click)="
                setTextDisplayForDialog('Editar ' + skill.name);
                showDialog();
                tipoDialogForm = 'Skill';
                sendSkillsInfoToReactiveForm(skill);
                skillId = skill.id;
                clearItemAndSkillForms()
              "
            >
              <p-inputIcon styleClass="pi pi-pencil" />
            </button>
            <button
              class="btn btn-secondary botaoEditarSkillHabilidade ml-2 mb-2 mt-2"
              pTooltip="Excluir Skill"
              tooltipPosition="top"
              (click)="confirmDeleteSkill(skill)"
            >
              <p-inputIcon styleClass="pi pi-times" />
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="col-12">
      <button
        class="btn btn-secondary mt-2 botaoAddSkill"
        (click)="
          showDialog();
          setTextDisplayForDialog('Adicionar Skill');
          tipoDialogForm = 'Skill'
        "
      >
        Adicionar Skill
      </button>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button
      label="Fechar"
      [outlined]="true"
      severity="danger"
      (onClick)="visibilityDialogSkills = false"
    />
  </ng-template>
</p-dialog>
<p-dialog
  header="Inventario de {{ selectedCharacter ? selectedCharacter.name : '' }}"
  [(visible)]="visibilityDialogInventory"
  [modal]="true"
  [style]="{ width: '50rem' }"
  [closeOnEscape]="false"
  [closable]="false"
  [blockScroll]="true"
  [keepInViewport]="true"
  [draggable]="false"
>
  <div class="">
    <p-table
      [value]="characterInventory"
      styleClass="p-datatable-gridlines"
      [tableStyle]="{ 'min-width': '40rem' }"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="headerTabela" colspan="2">Nome</th>
          <th class="headerTabela" colspan="2">Descrição</th>
          <th class="headerTabela" colspan="1">Energia</th>
          <th class="headerTabela" colspan="1">Quantidade</th>
          <th class="headerTabela" colspan="1">Ações</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-items>
        <tr>
          <td class="corpoTabela text-center" colspan="2">{{ items.name }}</td>
          <td class="corpoTabela" colspan="2">{{ items.description }}</td>
          <td class="corpoTabela text-center" colspan="1">
            {{ items.energy }}
          </td>
          <td class="corpoTabela text-center" colspan="1">
            {{ items.quantity }}
          </td>
          <td class="corpoTabela text-center" colspan="1">
            <button
              class="btn btn-secondary botaoEditarSkillHabilidade mt-2 mb-2"
              pTooltip="Editar Item"
              tooltipPosition="left"
              (click)="
                setTextDisplayForDialog('Editar ' + items.name);
                showDialog();
                tipoDialogForm = 'Item';
                sendItemsInfoToReactiveForm(items);
                itemId = items.id
              "
            >
              <p-inputIcon styleClass="pi pi-pencil" />
            </button>
            <button
              class="btn btn-secondary botaoEditarSkillHabilidade mb-2"
              pTooltip="Excluir Item"
              tooltipPosition="left"
              (click)="confirmDeleteItem(items)"
            >
              <p-inputIcon styleClass="pi pi-times" />
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="col-12">
      <button
        class="btn btn-secondary mt-2 botaoAddSkill"
        (click)="
          showDialog();
          setTextDisplayForDialog('Adicionar Item');
          tipoDialogForm = 'Item'
        "
      >
        Adicionar Item
      </button>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button
      label="Fechar"
      [outlined]="true"
      severity="danger"
      (onClick)="visibilityDialogInventory = false"
    />
  </ng-template>
</p-dialog>
<p-confirmDialog #cd>
  <ng-template pTemplate="headless" let-message>
    <div
      class="flex flex-column align-items-center p-5 surface-overlay border-round"
    >
      <div
        class="border-circle bg-primary inline-flex justify-content-center align-items-center h-6rem w-6rem"
      >
        <i class="pi pi-question text-5xl"></i>
      </div>
      <span class="font-bold text-2xl block mb-2 mt-4">
        {{ message.header }}
      </span>
      <p class="mb-0">{{ message.message }}</p>
      <div class="flex align-items-center gap-2 mt-4">
        <button
          pButton
          label="Sim"
          (click)="cd.accept()"
          class="w-8rem"
        ></button>
        <button
          pButton
          label="Mudei de Ideia"
          (click)="cd.reject()"
          class="p-button-outlined w-8rem"
        ></button>
      </div>
    </div>
  </ng-template>
</p-confirmDialog>
<p-toast [life]="5000" [baseZIndex]="5000" />
